<!DOCTYPE html>
<html>
<head>
	<title>Manipulating CSS, etc</title>
	<link href="../style.css" rel="stylesheet"/>
	<style>
		body {
			color:white;
			
		}
		
		.btn {
			display:inline-block;
			position:relative;
			left:0;
			top:0;
			width: 15%;
			text-align: center;
			box-shadow:2px 2px 2px white;
			border:1px solid white;
			border-radius:5px;
			padding:10px;
			cursor:pointer;
			margin:10px;
			float:left;
		}
		
		#info {
			display:inline-block;
			width:70%;
			margin:0 auto;
			padding:0 20px 10px;
			font-size:0.9em;
		}
		
		/*leave on bottom*/
		.box {
			width:0%;
			height:50px;
			transition:width 2s linear;
			-webkit-transition:width 2s linear;
		}
	</style>
</head>
<body>

	<h1 id="title">Manipulating CSS Class Properties Using JavaScript</h1>
	<div id="info">
	The changes to the CSS are in the body's background color and the width of the divs that make up the rainbow. Both of these changes are made when events fire and both access the style property of the elements to make the changes. The change in the button's box-shadow to get the 'button depression' effect is made by accessing the document's stylesheet, removing the button's css rule, and inserting a new rule for it to follow. 
	<br /></br />
	Some other changes include the change in the button's innerHTML onclick and the change in the 'home' link's color when the background-color is changed on mouseenter and mouseleave of each div of the rainbow. 
	</div>
	<div class="btn" id="changeWidthBtn">Initiate Rainbow</div>
	
	<!--HTML element where the output will go--->
	<div id="boxContainer">
	</div>
	
	<div class="nav">
		<a href="../index.html">home</a>
	</div>
	
<script>
	//Sets up colored squares
	var boxCon = document.getElementById('boxContainer');
	var bod = document.getElementsByTagName('body')[0];    //returns html collection. using [0] to get first/only element
	var colors = ['red','orange','yellow','green','blue','indigo','violet'];
	colors.forEach(function(color){
		var box = document.createElement('div');
		box.classList.add('box');
		box.style.backgroundColor = color;
		boxCon.appendChild(box);
	});
	
	
	/*
	
		Sets up mouse events that manipulate body background-color
		
		-Utilizes style property in the element to make the css change
		-Incorporates the mouseover and mouseout events
		
	*/
	var link = document.getElementsByTagName('a')[0];
	var linkColor = link.style.color; //get link color on load for easier update
	var boxArr = document.getElementsByClassName('box');
	for(box in boxArr){
		if(typeof boxArr[box] == 'object'){
			boxArr[box].addEventListener('mouseover', function(){
			
				//Changes the background color to the moused-over square
				bod.style.backgroundColor = this.style.backgroundColor;
				link.style.color = 'black';
			});
			boxArr[box].addEventListener('mouseout', function(){
			
				//returns the background color of body back to black
				bod.style.backgroundColor = 'black';
				link.style.color = linkColor;
			});
		}
	}
	
	
	/*
	
		Sets up button to change width of squares
		
		-Gets stylesheet from the document
		-Removes .box rule and replaces it (might be a better way)
		-Uses CSS transition
	
	*/
	var changeWid = document.getElementById('changeWidthBtn');
	var css = document.styleSheets[1];
	var shortSq = true;
	changeWid.addEventListener('click', function(){
		if(shortSq){
			css.removeRule(css.cssRules.length - 1);
			let newRule = ".box { width:100%; height:50px; transition:width 2s linear; -webkit-transition:width 2s linear;}";
			css.insertRule(newRule, css.cssRules.length); //Relies on rule being last in the list...see note in style in head tag
			shortSq = false;
			changeWid.innerHTML = 'Rainbow Return';
		}
		else{
			css.removeRule(css.cssRules.length - 1);
			let newRule = ".box { width:0%; height:50px; transition:width 2s linear; -webkit-transition:width 2s linear;}";
			css.insertRule(newRule, css.cssRules.length);
			shortSq = true;
			changeWid.innerHTML = 'Initiate Rainbow';
		}
	});
	
	
	/*
	
		Button depression on click
			
		-Uses mousedown and mouseup events
		-Makes changes to css by accessing style property of the element
		
	*/
	var boxShad = changeWid.style.boxShadow; //get boxShad on load for easier updates
	changeWid.addEventListener('mousedown', function(){
		changeWid.style.boxShadow = 'none';	
		changeWid.style.top = '2px';  //changeWid button has position set to relative
		changeWid.style.left = '2px';
	});
	
	changeWid.addEventListener('mouseup', function(){
		changeWid.style.boxShadow = boxShad;
		changeWid.style.top = '0';
		changeWid.style.left = '0';
	});
	
	
	
</script>
</body>
</html>